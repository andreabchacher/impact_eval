<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Lecture_05_Causal_Diagrams.knit</title>
  <style type="text/css">
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
            pre > code.sourceCode { white-space: pre; position: relative; }
            pre > code.sourceCode > span { line-height: 1.25; }
            pre > code.sourceCode > span:empty { height: 1.2em; }
            .sourceCode { overflow: visible; }
            code.sourceCode > span { color: inherit; text-decoration: inherit; }
            div.sourceCode { margin: 1em 0; }
            pre.sourceCode { margin: 0; }
            @media screen {
            div.sourceCode { overflow: auto; }
            }
            @media print {
            pre > code.sourceCode { white-space: pre-wrap; }
            pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
            }
            pre.numberSource code
              { counter-reset: source-line 0; }
            pre.numberSource code > span
              { position: relative; left: -4em; counter-increment: source-line; }
            pre.numberSource code > span > a:first-child::before
              { content: counter(source-line);
                position: relative; left: -1em; text-align: right; vertical-align: baseline;
                border: none; display: inline-block;
                -webkit-touch-callout: none; -webkit-user-select: none;
                -khtml-user-select: none; -moz-user-select: none;
                -ms-user-select: none; user-select: none;
                padding: 0 4px; width: 4em;
                color: #aaaaaa;
              }
            pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
            div.sourceCode
              {   }
            @media screen {
            pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
            }
            code span.al { color: #ff0000; font-weight: bold; } /* Alert */
            code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
            code span.at { color: #7d9029; } /* Attribute */
            code span.bn { color: #40a070; } /* BaseN */
            code span.bu { color: #008000; } /* BuiltIn */
            code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
            code span.ch { color: #4070a0; } /* Char */
            code span.cn { color: #880000; } /* Constant */
            code span.co { color: #60a0b0; font-style: italic; } /* Comment */
            code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
            code span.do { color: #ba2121; font-style: italic; } /* Documentation */
            code span.dt { color: #902000; } /* DataType */
            code span.dv { color: #40a070; } /* DecVal */
            code span.er { color: #ff0000; font-weight: bold; } /* Error */
            code span.ex { } /* Extension */
            code span.fl { color: #40a070; } /* Float */
            code span.fu { color: #06287e; } /* Function */
            code span.im { color: #008000; font-weight: bold; } /* Import */
            code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
            code span.kw { color: #007020; font-weight: bold; } /* Keyword */
            code span.op { color: #666666; } /* Operator */
            code span.ot { color: #007020; } /* Other */
            code span.pp { color: #bc7a00; } /* Preprocessor */
            code span.sc { color: #4070a0; } /* SpecialChar */
            code span.ss { color: #bb6688; } /* SpecialString */
            code span.st { color: #4070a0; } /* String */
            code span.va { color: #19177c; } /* Variable */
            code span.vs { color: #4070a0; } /* VerbatimString */
            code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
          </style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <script src="Lecture_05_Causal_Diagrams_files/header-attrs-2.28/header-attrs.js"></script>
  <link href="Lecture_05_Causal_Diagrams_files/slidy-2/styles/slidy.css" rel="stylesheet" />
  <script src="Lecture_05_Causal_Diagrams_files/slidy-2/scripts/slidy.js"></script>
  <script src="Lecture_05_Causal_Diagrams_files/slidy_shiny-1/slidy_shiny.js"></script>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
   href="template.css" />
</head>
<body>
<div id="section" class="slide section level2">
<h1></h1>
<div class="header-container first-slide-header">
<img src="logo.jpg" class="logo" alt="University Logo">
<img src="uibk_header1.png" class="header-image" alt="University Header">
<h1>
Lecture 5: Causal Diagrams
</h1>
</div>
</div>
<div id="recap" class="slide section level2">
<h1>Recap</h1>
<ul>
<li>Last time we talked about identification</li>
<li>There’s a theoretical concept we’re trying to get at, and we want to
pick out <em>just the variation</em> that represents that effect</li>
<li>We also talked about <em>how</em> we can identify causality in
data</li>
<li>Part of that will necessarily require us to have a model</li>
</ul>
</div>
<div id="models" class="slide section level2">
<h1>Models</h1>
<ul>
<li>We <em>have to have a model</em> to get at causality</li>
<li>A model is our way of <em>understanding the world</em>. It’s our
idea of what we think the data-generating process is</li>
<li>Models can be informal or formal - “The sun rises every day because
the earth spins” vs. super-complex astronomical models of the galaxy
with thousands of equations</li>
<li>All models are wrong. Even quantum mechanics. But as long as models
are right enough to be useful, we’re good to go!</li>
</ul>
</div>
<div id="models-1" class="slide section level2">
<h1>Models</h1>
<ul>
<li>Once we <em>do</em> have a model, though, that model will tell us
<em>exactly</em> how we can find a causal effect</li>
<li>(if it’s possible; sometimes the model says that to identify we must
do something impossible)</li>
<li>Just like Arteaga did, if we know a source of identified variation
in how <code>X</code> was assigned, and using that information we were
able to get a good estimate of the true treatment</li>
</ul>
</div>
<div id="example" class="slide section level2">
<h1>Example</h1>
<ul>
<li>Let’s work through a basic example where we know the data generating
process</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Is your company in tech? Let&#39;s say 30% of firms are</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">tech =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),<span class="dv">500</span>,<span class="at">replace=</span>T,<span class="at">prob=</span><span class="fu">c</span>(.<span class="dv">7</span>,.<span class="dv">3</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  <span class="co">#Tech firms on average spend $3mil more defending IP lawsuits</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">IP.spend =</span> <span class="dv">3</span><span class="sc">*</span>tech<span class="sc">+</span><span class="fu">runif</span>(<span class="dv">500</span>,<span class="at">min=</span><span class="dv">0</span>,<span class="at">max=</span><span class="dv">4</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  <span class="co">#Tech firms also have higher profits. But IP lawsuits lower profits</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log.profit =</span> <span class="dv">2</span><span class="sc">*</span>tech <span class="sc">-</span> .<span class="dv">3</span><span class="sc">*</span>IP.spend <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">500</span>,<span class="at">mean=</span><span class="dv">2</span>))</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co"># Now let&#39;s check for how profit and IP.spend are correlated!</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="fu">cor</span>(df<span class="sc">$</span>log.profit,df<span class="sc">$</span>IP.spend)</span></code></pre></div>
<pre><code>## [1] 0.1122291</code></pre>
<ul>
<li>Uh-oh! Truth is negative relationship, but data says positive!!</li>
</ul>
</div>
<div id="example-1" class="slide section level2">
<h1>Example</h1>
<ul>
<li>Now we can ask: <em>what do we know</em> about this situation?</li>
<li>How do we suspect the data was generated? (ignoring for a moment
that we know already)
<ul>
<li>We know that being a tech company leads you to have to spend more
money on IP lawsuits</li>
<li>We know that being a tech company leads you to have higher
profits</li>
<li>We know that IP lawsuits lower your profits</li>
</ul></li>
</ul>
</div>
<div id="example-2" class="slide section level2">
<h1>Example</h1>
<ul>
<li>From this, we realize that part of what we get when we calculate
<code>cor(df$log.profit,df$IP.spend)</code> is the influence of being a
tech company</li>
<li>Meaning that if we remove that influence, what’s left over should be
the actual, negative, effect of IP lawsuits</li>
<li>Now, we can get to this intuitively, but it would be much more
useful if we had a more formal model that could tell us what to do in
<em>lots</em> of situations</li>
</ul>
</div>
<div id="causal-diagrams" class="slide section level2">
<h1>Causal Diagrams</h1>
<ul>
<li>Enter the causal diagram!</li>
<li>A causal diagram (aka a Directed Acyclic Graph) is a way of writing
down your <em>model</em> that lets you figure out what you need to do to
find your causal effect of interest</li>
<li>All you need to do to make a causal diagram is write down all the
important features of the data generating process, and also write down
what you think causes what!</li>
</ul>
</div>
<div id="example-3" class="slide section level2">
<h1>Example</h1>
<ul>
<li>We know that being a tech company leads you to have to spend more
money on IP lawsuits</li>
<li>We know that being a tech company leads you to have higher
profits</li>
<li>We know that IP lawsuits lower your profits</li>
</ul>
</div>
<div id="example-4" class="slide section level2">
<h1>Example</h1>
<ul>
<li><span style="color:red">We know that being a tech company leads you
to have to spend more money on IP lawsuits</span></li>
<li>We know that being a tech company leads you to have higher
profits</li>
<li>We know that IP lawsuits lower your profits</li>
</ul>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-2-1.png" width="480" /></p>
</div>
<div id="example-5" class="slide section level2">
<h1>Example</h1>
<ul>
<li><span style="color:red">We know that being a tech company leads you
to have to spend more money on IP lawsuits</span></li>
<li><span style="color:red">We know that being a tech company leads you
to have higher profits</span></li>
<li>We know that IP lawsuits lower your profits</li>
</ul>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-3-1.png" width="480" /></p>
</div>
<div id="example-6" class="slide section level2">
<h1>Example</h1>
<ul>
<li><span style="color:red">We know that being a tech company leads you
to have to spend more money on IP lawsuits</span></li>
<li><span style="color:red">We know that being a tech company leads you
to have higher profits</span></li>
<li><span style="color:red">We know that IP lawsuits lower your
profits</span></li>
</ul>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-4-1.png" width="480" /></p>
</div>
<div id="voila" class="slide section level2">
<h1>Voila</h1>
<ul>
<li>We have <em>encoded</em> everything we know about this particular
little world in our diagram</li>
<li>(well, not everything, the diagram doesn’t say whether we think
these effects are positive or negative)</li>
<li>Not only can we see our assumptions, but we can see how they fit
together</li>
<li>For example, if we were looking for the impact of <em>tech</em> on
profit, we’d know that it happens directly, AND happens because tech
affects <code>IP.spend</code>, which then affects profit.</li>
</ul>
</div>
<div id="identification" class="slide section level2">
<h1>Identification</h1>
<ul>
<li>And if we want to isolate the effect of <code>IP.spend</code> on
<code>profit</code>, we can figure that out too</li>
<li>We’re <em>identifying</em> just one of those arrows, the one
<code>IP.spend -&gt; profit</code>, and seeing what the effect is on
that arrow!</li>
<li><strong>If we can shut down the other arrows, there’s only one path
you can walk on the diagram to get from treatment or outcome-only one
kind of variation left, and it MUST be the causal effect you
want</strong></li>
</ul>
</div>
<div id="identification-1" class="slide section level2">
<h1>Identification</h1>
<ul>
<li>Based on this graph, we can see that part of the correlation between
<code>IP.Spend</code> and <code>profit</code> can be <em>explained
by</em> how <code>tech</code> links the two.</li>
</ul>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-5-1.png" width="480" /></p>
</div>
<div id="identification-2" class="slide section level2">
<h1>Identification</h1>
<ul>
<li>Since we can <em>explain</em> part of the correlation with
<code>tech</code>, but we want to <em>identify</em> the part of the
correlation that ISN’T explained by <code>tech</code> (the causal part),
we will want to just use what isn’t explained by tech!
<ul>
<li>Use <code>tech</code> to explain <code>profit</code>, and take the
residual</li>
<li>Use <code>tech</code> to explain <code>IP.spend</code>, and take the
residual</li>
<li>The relationship between the first residual and the second residual
is <em>causal</em>!</li>
</ul></li>
</ul>
</div>
<div id="controlling" class="slide section level2">
<h1>Controlling</h1>
<ul>
<li>This process is called “adjusting” or “controlling”. We are
“controlling for <code>tech</code>” and taking out the part of the
relationship that is explained by it</li>
<li>(By Frisch-Waugh-Lovell, we can get the same result with a
regression where we include <code>tech</code> as a control)</li>
<li>In doing so, we’re looking at the relationship between
<code>IP.spend</code> and <code>profit</code> <em>just comparing firms
that have the same level of <code>tech</code></em>.</li>
<li>This is our “apples to apples” comparison that gives us an
experiment-like result</li>
</ul>
</div>
<div id="controlling-1" class="slide section level2">
<h1>Controlling</h1>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(tech) <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log.profit.resid =</span> log.profit <span class="sc">-</span> <span class="fu">mean</span>(log.profit),</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>         <span class="at">IP.spend.resid =</span> IP.spend <span class="sc">-</span> <span class="fu">mean</span>(IP.spend)) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>()</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">cor</span>(df<span class="sc">$</span>log.profit.resid,df<span class="sc">$</span>IP.spend.resid)</span></code></pre></div>
<pre><code>## [1] -0.3163876</code></pre>
<ul>
<li>Negative! Hooray</li>
</ul>
</div>
<div id="controlling-2" class="slide section level2">
<h1>Controlling</h1>
<ul>
<li>The same idea:</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(log.profit <span class="sc">~</span> IP.spend, <span class="at">data =</span> df)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(log.profit <span class="sc">~</span> IP.spend <span class="sc">+</span> tech, <span class="at">data =</span> df)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">msummary</span>(<span class="fu">list</span>(m1,m2), <span class="at">stars =</span> <span class="cn">TRUE</span>, <span class="at">gof_omit =</span> <span class="st">&#39;AIC|BIC|Lik|Adj.|F&#39;</span>)</span></code></pre></div>
</div>
<div id="controlling-3" class="slide section level2">
<h1>Controlling</h1>
<table style="width:51%;">
<colgroup>
<col width="19%" />
<col width="15%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><ol style="list-style-type: decimal">
<li></li>
</ol></th>
<th><ol start="2" style="list-style-type: decimal">
<li></li>
</ol></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>(Intercept)</td>
<td>1.474***</td>
<td>1.930***</td>
</tr>
<tr class="even">
<td></td>
<td>(0.094)</td>
<td>(0.090)</td>
</tr>
<tr class="odd">
<td>IP.spend</td>
<td>0.070*</td>
<td>-0.280***</td>
</tr>
<tr class="even">
<td></td>
<td>(0.028)</td>
<td>(0.038)</td>
</tr>
<tr class="odd">
<td>tech</td>
<td></td>
<td>1.809***</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>(0.148)</td>
</tr>
<tr class="odd">
<td>Num.Obs.</td>
<td>500</td>
<td>500</td>
</tr>
<tr class="even">
<td>R2</td>
<td>0.013</td>
<td>0.241</td>
</tr>
<tr class="odd">
<td>RMSE</td>
<td>1.12</td>
<td>0.98</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td colspan="3"><ul>
<li>p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</li>
</ul></td>
</tr>
</tfoot>

</table>
</div>
<div id="controlling-4" class="slide section level2">
<h1>Controlling</h1>
<ul>
<li>Imagine we’re looking at that relationship <em>within
color</em></li>
</ul>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-9-1.png" width="960" /></p>
</div>
<div id="literally" class="slide section level2">
<h1>LITERALLY</h1>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-10-1.gif" width="50%" style="display: block; margin: auto;" /></p>
</div>
<div id="recap-1" class="slide section level2">
<h1>Recap</h1>
<ul>
<li>By controlling for <code>tech</code> (“holding it constant”) we got
rid of the part of the <code>IP.spend</code>/<code>profit</code>
relationship that was explained by <code>tech</code>, and so managed to
<em>identify</em> the <span class="math inline">\(IP.spend \rightarrow
profit\)</span> arrow, the causal effect we’re interested in!</li>
<li>We correctly found that it was negative</li>
<li>Remember, we made it truly negative when we created the data, all
those slides ago</li>
</ul>
</div>
<div id="causal-diagrams-1" class="slide section level2">
<h1>Causal Diagrams</h1>
<ul>
<li>And it was the diagram that told us to control for
<code>tech</code></li>
<li>It’s going to turn out that diagrams can tell us how to identify
things in much more complex circumstances - we’ll get to that soon</li>
<li>But you might have noticed that it was pretty obvious what to do
just by looking at the graph</li>
</ul>
</div>
<div id="causal-diagrams-2" class="slide section level2">
<h1>Causal Diagrams</h1>
<ul>
<li>Can’t we just look at the data to see what we need to control
for?</li>
<li>After all, that would free us from having to make all those
assumptions and figure out our model</li>
<li>No!!!</li>
<li>Why? Because for a given set of data that we see, there are
<em>many</em> different data generating processes that could have made
it</li>
<li>Each requiring different kinds of adjustments in order to get it
right</li>
</ul>
</div>
<div id="causal-diagrams-3" class="slide section level2">
<h1>Causal Diagrams</h1>
<ul>
<li>We observe that <code>profit</code> (y), <code>IP.spend</code> (x),
and <code>tech</code> (z) are all related… which is it?</li>
</ul>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-11-1.png" width="768" /></p>
</div>
<div id="causal-diagrams-4" class="slide section level2">
<h1>Causal Diagrams</h1>
<ul>
<li>With only the data to work with we have <em>literally no way of
knowing</em> which of those is true</li>
<li>Maybe <code>IP.spend</code> causes companies to be <code>tech</code>
companies (in 2, 3, 6)</li>
<li>We know that’s silly because we have an idea of what the model
is</li>
<li>But that’s what lets us know it’s wrong - what we know about the
true model. With just the data we have no clue.</li>
</ul>
</div>
<div id="practice" class="slide section level2">
<h1>Practice</h1>
<p>Look at the diagram on the next page, intended to be a model of
fertility decisions in Switzerland based on education and whether one
comes from an agricultural family.</p>
<p>Ask:</p>
<ol style="list-style-type: decimal">
<li>What assumptions are in the graph?</li>
<li>Assuming the graph is true, why are Education and Fertility
related?</li>
<li>Do any of the assumptions seem wrong?</li>
</ol>
</div>
<div id="practice-1" class="slide section level2">
<h1>Practice</h1>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-12-1.png" width="672" /></p>
</div>
<div id="drawing-dags" class="slide section level2">
<h1>Drawing DAGs</h1>
<ul>
<li>So that’s what a DAG <em>is</em>. How do we <em>draw</em> one?</li>
<li>This will require us to <em>understand</em> what is going on in the
real world</li>
<li>(especially since we won’t know the right answer, like when we
simulate our own data!)</li>
<li>And then represent our understanding in the diagram</li>
</ul>
</div>
<div id="remember" class="slide section level2">
<h1>Remember</h1>
<ul>
<li>Our goal is to <em>represent the underlying data-generating
process</em></li>
<li>This is going to require some common-sense thinking</li>
<li>As well as some economic intuition</li>
<li>In real life, we’re not going to know what the right answer is</li>
<li>Our models will be wrong. We just need them to be useful</li>
</ul>
</div>
<div id="steps-to-a-causal-diagram" class="slide section level2">
<h1>Steps to a Causal Diagram</h1>
<ol style="list-style-type: decimal">
<li>Consider all the variables that are likely to be important in the
data generating process (this includes variables you can’t observe)</li>
<li>For simplicity, combine them together or prune the ones least likely
to be important</li>
<li>Consider which variables are likely to affect which other variables
and draw arrows from one to the other</li>
<li>(Bonus: Test some implications of the model to see if you have the
right one)</li>
</ol>
</div>
<div id="some-notes" class="slide section level2">
<h1>Some Notes</h1>
<ul>
<li>Drawing an arrow requires a <em>direction</em>. You’re making a
statement!</li>
<li>Omitting an arrow is a statement too - you’re saying neither causes
the other (directly)</li>
<li>If two variables are correlated but neither causes the other, that
means they’re both caused by some other (perhaps unobserved) variable
that causes both - add it!</li>
<li>Remember, “cause” just means “changes the probability of”. Not all
people who go to Seattle U are Catholic, but being Catholic increases
the probability of going to Seattle U, so a graph of Seattle U
attendance would have <span class="math inline">\(Catholic \rightarrow
SeattleU\)</span> on it</li>
</ul>
</div>
<div id="some-notes-1" class="slide section level2">
<h1>Some Notes</h1>
<ul>
<li>There shouldn’t be any <em>cycles</em> - You shouldn’t be able to
follow the arrows in one direction and end up where you started</li>
<li>If there <em>should</em> be a feedback loop, like “rich get richer”,
distinguish between the same variable at different points in time to
avoid it</li>
<li>A variable can take many values. So if sex affects something, you’d
have <span class="math inline">\(Sex\)</span> as a single variable, not
one for <span class="math inline">\(Male\)</span> and another for <span
class="math inline">\(Female\)</span></li>
<li>Don’t draw the DAG just so it will be easy to identify. Drawing the
DAG does not make it so! The goal is to reflect the true omdel in the
world</li>
</ul>
</div>
<div id="so-lets-do-it" class="slide section level2">
<h1>So let’s do it!</h1>
<ul>
<li>Let’s start with an econometrics classic: what is the causal effect
of an additional year of education on earnings?</li>
<li>That is, if we reached in and made someone get one more year of
education than they already did, how much more money would they
earn?</li>
</ul>
</div>
<div id="listing-variables" class="slide section level2">
<h1>1. Listing Variables</h1>
<ul>
<li>We can start with our two main variables of interest:
<ul>
<li>Education [we call this the “treatment” or “exposure” variable]</li>
<li>Earnings [the “outcome”]</li>
</ul></li>
</ul>
</div>
<div id="listing-variables-1" class="slide section level2">
<h1>1. Listing Variables</h1>
<ul>
<li>Then, we can add other variables likely to be relevant</li>
<li>Focus on variables that are likely to cause or be caused by
treatment</li>
<li>ESPECIALLY if they’re related both to the treatment and the
outcome</li>
<li>They don’t have to be things you can actually observe/measure</li>
<li>Variables that affect the outcome but aren’t related to anything
else aren’t really important (you’ll see why next week)</li>
</ul>
</div>
<div id="listing-variables-2" class="slide section level2">
<h1>1. Listing Variables</h1>
<ul>
<li>So what can we think of?
<ul>
<li>Ability</li>
<li>Socioeconomic status</li>
<li>Demographics</li>
<li>Phys. ed requirements</li>
<li>Year of birth</li>
<li>Location</li>
<li>Compulsory schooling laws</li>
<li>Job connections</li>
</ul></li>
</ul>
</div>
<div id="simplify" class="slide section level2">
<h1>2. Simplify</h1>
<ul>
<li>There’s a lot going on - in any social science system, there are
THOUSANDS of things that could plausibly be in your diagram</li>
<li>So we simplify. We ignore things that are likely to be only of
trivial importance [so Phys. ed is out!]</li>
<li>And we might try to combine variables that are very similar or might
overlap in what we measure [Socioeconomic status, Demographics, Location
-&gt; Background]</li>
<li>Now: Education, Earnings, Background, Year of birth, Location,
Compulsory schooling, and Job Connections</li>
</ul>
</div>
<div id="arrows" class="slide section level2">
<h1>3. Arrows!</h1>
<ul>
<li>Consider which variables are likely to cause which others</li>
<li>And, importantly, <em>which arrows you can leave out</em></li>
<li>The arrows you <em>leave out</em> are important to think about - you
sure there’s no effect? - and prized! You need those NON-arrows to be
able to causally identify anything.</li>
</ul>
</div>
<div id="arrows-1" class="slide section level2">
<h1>3. Arrows</h1>
<ul>
<li>Let’s start with our effect of interest</li>
<li>Education causes earnings</li>
</ul>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="arrows-2" class="slide section level2">
<h1>3. Arrows</h1>
<ul>
<li>Remaining: Background, Year of birth, Location, Compulsory
schooling, and Job Connections</li>
<li>All of these but Job Connections should cause Ed</li>
</ul>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-14-1.png" width="672" /></p>
</div>
<div id="arrows-3" class="slide section level2">
<h1>3. Arrows</h1>
<ul>
<li>Seems like Year of Birth, Location, and Background should ALSO
affect earnings. Job Connections, too.</li>
</ul>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-15-1.png" width="672" /></p>
</div>
<div id="arrows-4" class="slide section level2">
<h1>3. Arrows</h1>
<ul>
<li>Job connections, in fact, seems like it should be caused by
Education</li>
</ul>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-16-1.png" width="672" /></p>
</div>
<div id="arrows-5" class="slide section level2">
<h1>3. Arrows</h1>
<ul>
<li>Location and Background are likely to be related, but neither really
causes the other. Make unobservable U1 and have it cause both!</li>
</ul>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="causal-diagrams-5" class="slide section level2">
<h1>Causal Diagrams</h1>
<ul>
<li>And there we have it!</li>
<li>Perhaps a little messy, but that can happen</li>
<li>We have modeled our idea of what the data generating process looks
like</li>
</ul>
</div>
<div id="dagitty.net" class="slide section level2">
<h1>Dagitty.net</h1>
<ul>
<li>These graphs can be drawn by hand</li>
<li>Or we can use a computer to help</li>
<li>We will be using dagitty.net to draw these graphs</li>
<li>(You can also draw them with R code - see the slides, but you won’t
need to know this)</li>
</ul>
</div>
<div id="dagitty.net-1" class="slide section level2">
<h1>Dagitty.net</h1>
<ul>
<li>Go to dagitty.net and click on “Launch”</li>
<li>You will see an example of a causal diagram with nodes (variables)
and arrows</li>
<li>Plus handy color-coding and symbols. Green triangle for
exposure/treatment, and blue bar for outcome.</li>
<li>The green arrow is the “causal path” we’d like to
<em>identify</em></li>
</ul>
</div>
<div id="dagitty.net-2" class="slide section level2">
<h1>Dagitty.net</h1>
<ul>
<li>Go to Model and New Model</li>
<li>Let’s recreate our Education and Earnings diagram</li>
<li>Put in Education as the exposure and Earnings as the outcome (you
can use longer variable names than we’ve used here)</li>
</ul>
</div>
<div id="dagitty.net-3" class="slide section level2">
<h1>Dagitty.net</h1>
<ul>
<li>Double-click on blank space to add new variables.</li>
<li>Add all the variables we’re interested in.</li>
</ul>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-18-1.png" width="672" /></p>
</div>
<div id="dagitty.net-4" class="slide section level2">
<h1>Dagitty.net</h1>
<ul>
<li>Then, double click on some variable <code>X</code>, then once on
another variable <code>Y</code> to get an arrow for
<code>X -&gt; Y</code></li>
<li>Fill in all our arrows!</li>
</ul>
<p><img src="Lecture_05_Causal_Diagrams_files/figure-slidy/unnamed-chunk-19-1.png" width="672" /></p>
</div>
<div id="dagitty.net-5" class="slide section level2">
<h1>Dagitty.net</h1>
<ul>
<li>Feel free to move the variables around with drag-and-drop to make it
look a bit nicer</li>
<li>You can even drag the arrows to make them curvy</li>
</ul>
</div>
<div id="practice-2" class="slide section level2">
<h1>Practice</h1>
<ul>
<li>Consider the causal question “does a longer night’s sleep extend
your lifespan?”</li>
</ul>
<ol style="list-style-type: decimal">
<li>List variables [think especially hard about what things might lead
you to get a longer night’s sleep]</li>
<li>Simplify</li>
<li>Arrows</li>
</ol>
<ul>
<li>Then, when you’re done, draw it in Dagitty.net!</li>
</ul>
</div>
<div class="footer">
  <div class="footer-left">
    <img src="logo.jpg" class="footer-logo-image">
  </div>
  <div class="footer-center">
   Andreas Steinmayr
  </div>
  <div class="footer-right">
    <span class="course-number">404050 VU/3VU Empirical Economics </span>
  </div>
</div>

  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

</body>
</html>
